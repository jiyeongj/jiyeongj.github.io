{"componentChunkName":"component---src-templates-blog-post-js","path":"/csharp/howtoqqplot/","result":{"data":{"site":{"siteMetadata":{"title":"Ji Yeong Blog","author":"Ji Yeong Choe","siteUrl":"https://jiyeongj.github.io","comment":{"disqusShortName":"","utterances":"jiyeongj/jiyeongj.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"7676f974-9a10-5013-8d38-66bfe9a0c0db","excerpt":"Q-Q Plot 그리는 방법 Q-Q Plot을 그리는 방법은 엑셀에서 Q-Q 플롯 그리기를 참고하였습니다. 위 내용을 요약하면 아래 순서와 같습니다. CSV 테스트 데이터(QQTest.csv) 읽어온다. 오름차순 정렬 순위(Rank) 계산 백분위 계산 Z-Score 계산 엑셀에서의 NORM.S.INV 함수 MATH.NET NuGet의 InverseCumulativeDistribution()사용 InverseCumulativeDistribution X축은 5번(z-score)의 데이터, Y…","html":"<h2 id=\"q-q-plot-그리는-방법\" style=\"position:relative;\"><a href=\"#q-q-plot-%EA%B7%B8%EB%A6%AC%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"q q plot 그리는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q-Q Plot 그리는 방법</h2>\n<p>Q-Q Plot을 그리는 방법은 <a href=\"https://loadtoexcelmaster.tistory.com/entry/%EC%97%91%EC%85%80%EC%97%90%EC%84%9C-Q-Q%ED%94%8C%EB%A1%AFQ-Q-Plot-%EA%B7%B8%EB%A6%AC%EA%B8%B0\">엑셀에서 Q-Q 플롯 그리기</a>를 참고하였습니다.</p>\n<p>위 내용을 요약하면 아래 순서와 같습니다.</p>\n<ol>\n<li>CSV 테스트 데이터(QQTest.csv) 읽어온다.</li>\n<li>오름차순 정렬</li>\n<li>순위(Rank) 계산</li>\n<li>백분위 계산</li>\n<li>\n<p>Z-Score 계산</p>\n<ul>\n<li>엑셀에서의 NORM.S.INV 함수</li>\n<li>\n<p>MATH.NET NuGet의 InverseCumulativeDistribution()사용</p>\n<ul>\n<li><a href=\"https://numerics.mathdotnet.com/api/MathNet.Numerics.Distributions/Normal.htm#InverseCumulativeDistribution\">InverseCumulativeDistribution</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>X축은 5번(z-score)의 데이터, Y축(정렬한 데이터)은 2번의 데이터</li>\n</ol>\n<h2 id=\"code\" style=\"position:relative;\"><a href=\"#code\" aria-label=\"code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code</h2>\n<div class=\"gatsby-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">// 1. 데이터 읽어오기</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> projectDir <span class=\"token operator\">=</span> Directory<span class=\"token punctuation\">.</span><span class=\"token function\">GetParent</span><span class=\"token punctuation\">(</span>Environment<span class=\"token punctuation\">.</span>CurrentDirectory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>Parent<span class=\"token punctuation\">.</span>FullName<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token keyword\">string</span></span> filePath <span class=\"token operator\">=</span> Path<span class=\"token punctuation\">.</span><span class=\"token function\">Combine</span><span class=\"token punctuation\">(</span>projectDir<span class=\"token punctuation\">,</span> <span class=\"token string\">\"QQTest.csv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">StreamReader</span> sr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">StreamReader</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> Encoding<span class=\"token punctuation\">.</span><span class=\"token function\">GetEncoding</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"euc-kr\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span> numbers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>sr<span class=\"token punctuation\">.</span>EndOfStream<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> s <span class=\"token operator\">=</span> sr<span class=\"token punctuation\">.</span><span class=\"token function\">ReadLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> temp <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">Split</span><span class=\"token punctuation\">(</span><span class=\"token string character\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        \n    numbers<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 2. 오름차순 정렬</span>\nnumbers<span class=\"token punctuation\">.</span><span class=\"token function\">Sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 3. 순위(Rank) 계산</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> numberCount <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span>Count<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span> ranks <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberCount <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    ranks<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 4. 백분위 계산</span>\n<span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span> percentiles <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         \n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> rank <span class=\"token keyword\">in</span> ranks<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> percentile <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>rank <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> numberCount<span class=\"token punctuation\">;</span>\n    percentiles<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>percentile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 5. Z-Score 계산</span>\n<span class=\"token comment\">// 표준 정규 누적 분포 역함수 : NORM.S.INV</span>\n<span class=\"token comment\">// MATH.NET NuGet 사용</span>\n<span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span> normStandardInverses <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">List<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> percentile <span class=\"token keyword\">in</span> percentiles<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> normal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Normal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">double</span></span> <span class=\"token keyword\">value</span> <span class=\"token operator\">=</span> normal<span class=\"token punctuation\">.</span><span class=\"token function\">InverseCumulativeDistribution</span><span class=\"token punctuation\">(</span>percentile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    normStandardInverses<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 6. Q-Q Plot X, Y값 확인 </span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> xData <span class=\"token operator\">=</span> normStandardInverses<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> yData <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">;</span></code></pre></div>\n<p>만들어진 <code class=\"language-text\">xData</code> 및 <code class=\"language-text\">yData</code>로 차트 라이브러리를 이용해 Q-Q Plot을 그리면 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 608px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABCElEQVQoz4VSXW+DMAzM//973SpNUx8mTXRbO8EgIXHswOw4RPSL+ulI7nL2GTM/qJRSm4uI6uF0yTHTUsy+AiEEAMgncpi1+lU4JuVixA6qqWC5mvXTBjoP4AB9JCS52hKjlPQ8Ar1/u6YLgAlFV56WtuuQV4BZbGqB9o3tPd7SNtsmtCG+NhbEv0SxHuphYPx2RHr5HEZI2sUtzcQYtRMOVkGMGFGa3H20p7+RQR4eVcP8Ckz1WYKddbGHkz+2XnZT9pO2Z5Z1zpl6kGyBFZgfqpw7M5e/ZxLn3tPbl/vpQWdWH2XfcWYNh8m0zsHvAMcOXEAVEO/0qXM2mISoPguVI1TqWrwG/z3eACRvVthgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"qqplot\"\n        title=\"qqplot\"\n        src=\"/static/782c04a6c2e2a5e4fb2e384e7c5d7a7e/18872/qqplot.png\"\n        srcset=\"/static/782c04a6c2e2a5e4fb2e384e7c5d7a7e/5a46d/qqplot.png 300w,\n/static/782c04a6c2e2a5e4fb2e384e7c5d7a7e/0a47e/qqplot.png 600w,\n/static/782c04a6c2e2a5e4fb2e384e7c5d7a7e/18872/qqplot.png 608w\"\n        sizes=\"(max-width: 608px) 100vw, 608px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>","frontmatter":{"title":"C#으로 Q-Q Plot 그리기","date":"April 20, 2022"}}},"pageContext":{"slug":"/csharp/howtoqqplot/","previous":null,"next":{"fields":{"slug":"/development/howto_opensource_contribution/"},"frontmatter":{"title":"주니어 개발자의 오픈소스 기여하기 - (1)"}}}}}